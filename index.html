<!DOCTYPE html>
<html>
    <head>
        <link href="https://s1.pstatp.com/cdn/expire-1-M/element-ui/2.8.2/theme-chalk/index.css" type="text/css" rel="stylesheet" />
        <script src="https://s3.pstatp.com/cdn/expire-1-M/vue/2.6.10/vue.min.js" type="application/javascript"></script>
        <script src="https://s2.pstatp.com/cdn/expire-1-M/element-ui/2.8.2/index.js" type="application/javascript"></script>
        <style>
            html {
                height: 100%;
            }
            body {
                height: 100%;
                position: relative;
                display: flex;
                flex-flow: column nowrap;
                justify-items: start;
                align-items: center;
                font-family: "PingFang SC";
            }
            div{
                font-family: "PingFang SC";
                font-weight:bolder;
            }
            #app {
                width: 1100px;
                position: relative;
            }
            table {
                margin: 50px 50px 0px 50px;
                border-collapse: collapse;
                box-sizing: border-box;
            }
            tr{
                padding:10px 0px 10px 0px;
            }
            td {
                border: 1px solid #ebeef5;
                margin: 0px;
                box-sizing: border-box;
                padding:20px 0px 20px 0px;
                text-align: center;
                vertical-align: middle;

            }
            .material-col{
                width: 650px;
            }
            .target-col{
                width: 350px;
            }
            .material-container{
                display: inline-flex;
                flex-flow: column nowrap;;
                justify-content: center;
                align-items: center;
                padding: 10px;
            }
            .gray-tr{
                background-color: #fafafa;
            }
            .material-icon{
                height: 70px;
                margin: 0px 0px 10px 0px;
            }
            .material-title{
                font-size: 15px;
            }
            .target-title{
                font-size: 20px;
            }
            .thead-title{
                font-size: 20px;
            }
            .color-a{color: rgb(50, 215, 160);}
            .color-g{color: rgb(255, 172, 0);}
            .color-e{color: rgb(204, 128, 255);}
            .color-d{color: rgb(165, 213, 52);}
            .color-h{color: rgb(0, 192, 255);}
            .color-p{color: rgb(255, 102, 64);}
            .color-c{color: rgb(128, 255, 255);}
            .color-l{color: rgb(226, 172, 87);}
            .color-r{color: rgb(81, 161, 181);}
            .color-u{color: rgb(94, 149, 109);}
            .color-n{color: rgb(132, 132, 132);}

        </style>
        <script>
            const level = ['l','e','r','u','n','g','e','c','p','h','a']
            const materialShortName = { "高塔孤王":"w0", "孤云寒林":"w1", "凛风奔狼":"w2", "漆黑陨铁":"w3", "狮牙斗士":"w4", "雾海云间":"w5", "繁荣":"s0", "黄金":"s1", "抗争":"s2", "勤劳":"s3", "诗文":"s4", "自由":"s5", };
            const materials = { "s0": [0, 1, 4], "s1": [0, 3, 6], "s2": [0, 2, 5], "s3": [0, 2, 5], "s4": [0, 3, 6], "s5": [0, 1, 4], "w0": [0, 1, 4], "w1": [0, 1, 4], "w2": [0, 2, 5], "w3": [0, 3, 6], "w4": [0, 3, 6], "w5": [0, 2, 5], };
            const materialFileName = { w0_0: "高塔孤王的破瓦", w0_1: "高塔孤王的残垣", w0_2: "高塔孤王的断片", w0_3: "高塔孤王的碎梦", w1_0: "孤云寒林的光砂", w1_1: "孤云寒林的辉岩", w1_2: "孤云寒林的圣骸", w1_3: "孤云寒林的神体", w2_0: "凛风奔狼的始龀", w2_1: "凛风奔狼的裂齿", w2_2: "凛风奔狼的断牙", w2_3: "凛风奔狼的怀乡", w3_0: "漆黑陨铁的一粒", w3_1: "漆黑陨铁的一片", w3_2: "漆黑陨铁的一角", w3_3: "漆黑陨铁的一块", w4_0: "狮牙斗士的枷锁", w4_1: "狮牙斗士的铁链", w4_2: "狮牙斗士的镣铐", w4_3: "狮牙斗士的理想", w5_0: "雾海云间的铅丹", w5_1: "雾海云间的汞丹", w5_2: "雾海云间的金丹", w5_3: "雾海云间的转还", s0_0: "「繁荣」的教导", s0_1: "「繁荣」的指引", s0_2: "「繁荣」的哲学", s1_0: "「黄金」的教导", s1_1: "「黄金」的指引", s1_2: "「黄金」的哲学", s2_0: "「抗争」的教导", s2_1: "「抗争」的指引", s2_2: "「抗争」的哲学", s3_0: "「勤劳」的教导", s3_1: "「勤劳」的指引", s3_2: "「勤劳」的哲学", s4_0: "「诗文」的教导", s4_1: "「诗文」的指引", s4_2: "「诗文」的哲学", s5_0: "「自由」的教导", s5_1: "「自由」的指引", s5_2: "「自由」的哲学", };
            const goods = {
                "e刻晴": "s0",
                "c七七": "s0",
                "g凝光": "s0",
                "h行秋": "s1",
                "e北斗": "s1",
                "g钟离": "s1",
                "p辛焱": "s1",
                "p班尼特": "s2",
                "p迪卢克": "s2",
                "h莫娜": "s2",
                "a琴": "s2",
                "e雷泽": "s2",
                "g诺艾尔": "s2",
                "p香菱": "s3",
                "c重云": "s3",
                "g阿贝多": "s4",
                "a温迪": "s4",
                "e丽莎": "s4",
                "e菲谢尔": "s4",
                "c凯亚": "s4",
                "h达达利亚": "s5",
                "c迪奥娜": "s5",
                "p安柏": "s5",
                "p可莉": "s5",
                "h芭芭拉": "s5",
                "a砂糖": "s5",
                "l风鹰剑": "w0",
                "e雪葬的星银": "w0",
                "e钟剑": "w0",
                "e西风剑": "w0",
                "e宗室长剑": "w0",
                "e宗室秘法录": "w0",
                "e西风秘典": "w0",
                "e绝弦": "w0",
                "e苍翠猎弓": "w0",
                "r铁影阔剑": "w0",
                "r冷刃": "w0",
                "r魔导绪论": "w0",
                "r鸦羽弓": "w0",
                "u银剑": "w0",
                "u口袋魔导书": "w0",
                "n无锋剑": "w0",
                "n学徒笔记": "w0",
                "l和璞鸢": "w1",
                "e白影剑": "w1",
                "e黑岩长剑": "w1",
                "e匣里龙吟": "w1",
                "e黑岩绯玉": "w1",
                "e黑岩战弓": "w1",
                "e匣里日月": "w1",
                "e弓藏": "w1",
                "e流月针": "w1",
                "r翡玉法球": "w1",
                "r弹弓": "w1",
                "r白缨枪": "w1",
                "l天空之翼": "w2",
                "l天空之卷": "w2",
                "l天空之刃": "w2",
                "l天空之傲": "w2",
                "e祭礼大剑": "w2",
                "e黑剑": "w2",
                "e笛剑": "w2",
                "e流浪乐章": "w2",
                "e祭礼弓": "w2",
                "e决斗之枪": "w2",
                "r沐浴龙血的剑": "w2",
                "r黎明神剑": "w2",
                "r讨龙英杰谭": "w2",
                "r神射手之誓": "w2",
                "u佣兵重剑": "w2",
                "u历练的猎弓": "w2",
                "n训练大剑": "w2",
                "n猎弓": "w2",
                "l尘世之锁": "w3",
                "l贯虹之槊": "w3",
                "e铁蜂刺": "w3",
                "e万国诸海图谱": "w3",
                "e钢轮弓": "w3",
                "e试作星镰": "w3",
                "e试作古华": "w3",
                "e螭骨剑": "w3",
                "r飞天大御剑": "w3",
                "r飞天御剑": "w3",
                "r黑缨枪": "w3",
                "l天空之脊": "w4",
                "l阿莫斯之弓": "w4",
                "l四风原典": "w4",
                "l狼的末路": "w4",
                "e宗室大剑": "w4",
                "e西风大剑": "w4",
                "e腐殖之剑": "w4",
                "e祭礼剑": "w4",
                "e祭礼残章": "w4",
                "e西风猎弓": "w4",
                "e宗室长弓": "w4",
                "e西风长枪": "w4",
                "r白铁大剑": "w4",
                "r旅行剑": "w4",
                "r异世界行记": "w4",
                "r反曲弓": "w4",
                "u铁尖枪": "w4",
                "n新手长枪": "w4",
                "l无工之剑": "w5",
                "e雨裁": "w5",
                "e试作斩岩": "w5",
                "e昭心": "w5",
                "e试作金珀": "w5",
                "e试作澹月": "w5",
                "e匣里灭辰": "w5",
                "e黑岩刺枪": "w5",
                "e黑岩斩刀": "w5",
                "r以理服人": "w5",
                "r吃虎鱼刀": "w5",
                "r甲级宝珏": "w5",
                "r信使": "w5",
                "r钺矛": "w5",
                "e忍冬之果":"狮牙斗士",
                "e龙脊长枪":"雾海云间",
            };

        </script>
    </head>
    <body>
        <div id="app">
            <el-container>
                <el-header>
                    <div style="font-size: 39px; font-weight: bold">原神每日素材本</div>
                </el-header>
                <el-main>
                    <el-collapse v-model="activeName" accordion @change="changeSelect">
                        <el-collapse-item v-for="(day,index) in days" :title="currentDay[day]" :name="index">
                            <table>
                                <thead>
                                    <tr>
                                        <td class="thead-title">素材</td>
                                        <td class="thead-title">用途</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(files,key) in dailyMaterial[day]" >
                                    <!-- <tr v-for="(files,key) in dailyMaterial_v[day]" > -->
                                        <td class="material-col">
                                            <div v-for="(material,index) in files" class="material-container">
                                                <img :src="'img/'+material+'.png'" class="material-icon">
                                                <div class="material-title">{{materialFileName[material]}}</div>

                                            </div>
                                        </td>
                                        <td class="target-col">
                                            <div v-for="(target,index) in utilization[key]" :class="'target-title color-' + target.substring(0,1)">{{target.substring(1,target.length)}}</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </el-collapse-item>


                    </el-collapse>
                </el-main>
            </el-container>
        </div>
        <script>
            const utilization = {};
            for(let key in materials){
                utilization[key] = []
            }
            for(let l of level){

                for(let key in goods){
                    if(key.startsWith(l)){
                        const m = goods[key]
                        if(utilization.hasOwnProperty(m)){
                            utilization[m].push(key)
                        }else{
                            utilization[materialShortName[m]].push(key)
                        }
                        delete goods[key]
                    }
                }
            }

            const days = [1,2,3,4,5,6,0]
            const dailyMaterial = [{}, {}, {}, {}, {}, {}, {}];
            const dailyMaterial_v = [{}, {}, {}, {}, {}, {}, {}];
            for (let d = 0; d < 7; d++) {
                for (let material in materials) {
                    if (materials[material].indexOf(d) > -1) {
                        dailyMaterial[d][material] = [];
                    }
                }
            }
            for (let day in dailyMaterial) {
                for (let material in dailyMaterial[day]) {
                    for (let fileName in materialFileName) {
                        if (fileName.startsWith(material)) {
                            dailyMaterial[day][material].push(fileName);
                        }
                    }
                }
            }

            const currentDate = new Date();
            const currentDay = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
            currentDay[currentDate.getDay()] += "    (今天)";
            new Vue({
                el: "#app",
                data() {
                    return {
                        visible: true,
                        activeName: currentDate.getDay().toString(),
                        currentDay,
                        dailyMaterial,
                        dailyMaterial_v,
                        materialFileName,
                        days,
                        utilization,
                    };
                },
                methods: {
                    changeSelect(activeName){
                        console.log(123)
                        this.dailyMaterial_v[Number(activeName)] = this.dailyMaterial[Number(activeName)]
                    }
                },
            });

            document.getElementsByClassName('el-collapse-item')[(currentDate.getDay()+6)%7].children[0].children[0].click()
        </script>
    </body>
</html>
